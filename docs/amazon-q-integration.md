# Amazon Q é›†æˆä½¿ç”¨æ–¹æ³•

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•å°†Amazon Q AIåŠ©æ‰‹é›†æˆåˆ°GitLabä»£ç å®¡æŸ¥æœºå™¨äººä¸­ï¼Œå®žçŽ°ä¸ŽAIçš„ç›´æŽ¥äº¤äº’ã€‚

## ðŸŽ¯ åŠŸèƒ½ç‰¹ç‚¹

- **ç›´æŽ¥äº¤äº’**: é€šè¿‡Amazon Q CLIç›´æŽ¥ä¸ŽAIåŠ©æ‰‹å¯¹è¯
- **æ™ºèƒ½å®¡æŸ¥**: èŽ·å¾—æ›´å‡†ç¡®ã€æ›´ä¸“ä¸šçš„ä»£ç å®¡æŸ¥å»ºè®®
- **ä¸Šä¸‹æ–‡ç†è§£**: AIèƒ½ç†è§£å®Œæ•´çš„é¡¹ç›®ä¸Šä¸‹æ–‡å’Œä»£ç å˜æ›´
- **è¡Œå†…è¯„è®º**: ç”Ÿæˆç²¾ç¡®çš„è¡Œçº§è¯„è®ºå»ºè®®
- **å¤‡ç”¨æœºåˆ¶**: å¦‚æžœAmazon Qä¸å¯ç”¨ï¼Œè‡ªåŠ¨å›žé€€åˆ°å…¶ä»–AIæä¾›å•†

## ðŸ“‹ å‰ç½®æ¡ä»¶

### 1. å®‰è£…Amazon Q CLI

```bash
# å®‰è£…Amazon Q CLI (æ ¹æ®ä½ çš„ç³»ç»Ÿé€‰æ‹©)
# macOS
brew install amazon-q

# æˆ–è€…ä»Žå®˜ç½‘ä¸‹è½½å®‰è£…åŒ…
# https://aws.amazon.com/q/developer/
```

### 2. é…ç½®è®¤è¯

```bash
# é…ç½®AWSå‡­è¯
aws configure

# æˆ–è€…è®¾ç½®çŽ¯å¢ƒå˜é‡
export AWS_ACCESS_KEY_ID=your-access-key
export AWS_SECRET_ACCESS_KEY=your-secret-key
export AWS_DEFAULT_REGION=us-east-1

# éªŒè¯Amazon Q CLI
q doctor
```

## âš™ï¸ é…ç½®æ­¥éª¤

### 1. çŽ¯å¢ƒå˜é‡é…ç½®

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```bash
# ==================== AIæ¨¡åž‹é…ç½® ====================
# è®¾ç½®AIæä¾›å•†ä¸ºAmazon Q
AI_PROVIDER=amazonq

# å¯ç”¨Amazon Q CLIæ¨¡å¼
AMAZONQ_USE_CLI=true
AMAZONQ_CLI_PATH=q

# ==================== GitLabé…ç½® ====================
GITLAB_URL=https://your-gitlab-server.com
GITLAB_TOKEN=your-gitlab-token-here

# ==================== æœåŠ¡å™¨é…ç½® ====================
HOST=0.0.0.0
PORT=8080
```

### 2. éªŒè¯é…ç½®

è¿è¡Œå®Œæ•´æµ‹è¯•è„šæœ¬ï¼š

```bash
python3 test_amazonq_cli.py
```

æµ‹è¯•è„šæœ¬ä¼šæ£€æŸ¥ï¼š
- âœ… Amazon Q CLIå®‰è£…çŠ¶æ€
- âœ… è®¤è¯é…ç½®
- âœ… åŸºæœ¬åŠŸèƒ½
- âœ… AIå®¢æˆ·ç«¯é›†æˆ
- âœ… ä»£ç å®¡æŸ¥å™¨é›†æˆ

## ðŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å¯åŠ¨æœåŠ¡

```bash
python3 app.py
```

æœåŠ¡å¯åŠ¨åŽä¼šæ˜¾ç¤ºï¼š
```
ðŸš€ å¯åŠ¨AIä»£ç å®¡æŸ¥æœåŠ¡ï¼ˆæ€§èƒ½ä¼˜åŒ–ç‰ˆï¼‰ï¼Œç›‘å¬ 0.0.0.0:8080
```

### 2. é…ç½®GitLab Webhook

åœ¨GitLabé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ Webhookï¼š
- **URL**: `http://your-server:8080/webhook`
- **è§¦å‘äº‹ä»¶**: 
  - âœ… Merge request events
  - âœ… Comments

### 3. è§¦å‘ä»£ç å®¡æŸ¥

#### è‡ªåŠ¨è§¦å‘
- åˆ›å»ºMerge Requestæ—¶è‡ªåŠ¨è§¦å‘å®¡æŸ¥

#### æ‰‹åŠ¨è§¦å‘
åœ¨MRè¯„è®ºä¸­è¾“å…¥ä»¥ä¸‹ä»»ä¸€å…³é”®è¯ï¼š
- `/review`
- `/ai-review`
- `ai review`
- `ä»£ç å®¡æŸ¥`
- `review code`
- `aiå®¡æŸ¥`
- `æ™ºèƒ½å®¡æŸ¥`

## ðŸ“ å®¡æŸ¥æµç¨‹

### 1. è§¦å‘é˜¶æ®µ
```
GitLab MRåˆ›å»º/è¯„è®º â†’ Webhook â†’ AIä»£ç å®¡æŸ¥æœåŠ¡
```

### 2. å¤„ç†é˜¶æ®µ
```
ä»£ç å˜æ›´èŽ·å– â†’ ä¸Šä¸‹æ–‡åˆ†æž â†’ Amazon Q AIå®¡æŸ¥ â†’ ç»“æžœæ ¼å¼åŒ–
```

### 3. åé¦ˆé˜¶æ®µ
```
å®¡æŸ¥ç»“æžœ â†’ GitLabè¯„è®º â†’ è¡Œå†…è¯„è®º â†’ å®Œæˆé€šçŸ¥
```

## ðŸŽ¨ å®¡æŸ¥ç»“æžœç¤ºä¾‹

Amazon Qä¼šæä¾›è¯¦ç»†çš„å®¡æŸ¥ç»“æžœï¼š

```markdown
ðŸ¤– **AIæ™ºèƒ½åˆ†æžå®Œæˆ**

### ðŸŽ¯ ä»£ç è¯„åˆ†ï¼š85åˆ†ï¼ˆ0-100åˆ†ï¼‰

### âœ… ä¼˜ç‚¹
- ä»£ç ç»“æž„æ¸…æ™°ï¼Œå‡½æ•°èŒè´£å•ä¸€
- æ·»åŠ äº†é€‚å½“çš„æ—¥å¿—è®°å½•
- éµå¾ªäº†Pythonç¼–ç è§„èŒƒ

### âŒ å‘çŽ°çš„é—®é¢˜
- ç¼ºå°‘è¾“å…¥å‚æ•°éªŒè¯ï¼Œå¯èƒ½å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
- æ•°æ®åº“æŸ¥è¯¢æœªä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œå­˜åœ¨SQLæ³¨å…¥é£Žé™©
- å¼‚å¸¸å¤„ç†ä¸å¤Ÿå®Œå–„ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒ

### ðŸ’¡ æ”¹è¿›å»ºè®®
- æ·»åŠ è¾“å…¥å‚æ•°ç±»åž‹æ£€æŸ¥å’Œæ ¼å¼éªŒè¯
- ä½¿ç”¨ORMæˆ–å‚æ•°åŒ–æŸ¥è¯¢é˜²æ­¢SQLæ³¨å…¥
- å¢žåŠ try-catchå¼‚å¸¸å¤„ç†æœºåˆ¶
- æ·»åŠ å•å…ƒæµ‹è¯•è¦†ç›–å…³é”®é€»è¾‘

### ðŸ”§ ä»£ç ä¿®æ”¹ç¤ºä¾‹
```python
# ä¿®æ”¹å‰
def get_user(user_id):
    query = f"SELECT * FROM users WHERE id = {user_id}"
    return db.execute(query)

# ä¿®æ”¹åŽ
def get_user(user_id: int) -> Optional[User]:
    if not isinstance(user_id, int) or user_id <= 0:
        raise ValueError("Invalid user_id")
    
    try:
        query = "SELECT * FROM users WHERE id = %s"
        return db.execute(query, (user_id,))
    except Exception as e:
        logger.error(f"Failed to get user {user_id}: {e}")
        return None
```

### ðŸ“‹ æ€»ç»“
ä»£ç æ•´ä½“è´¨é‡è‰¯å¥½ï¼Œä¸»è¦éœ€è¦åŠ å¼ºå®‰å…¨æ€§å’Œé”™è¯¯å¤„ç†ã€‚

---
*ç”±AIä»£ç å®¡æŸ¥æœºå™¨äººè‡ªåŠ¨ç”Ÿæˆ*

âœ… å·²æ·»åŠ  3 ä¸ªAIè¡Œå†…è¯„è®º
ðŸ“Š **å®¡æŸ¥ç»Ÿè®¡**: å·²å®Œæˆ 1 æ¬¡å®¡æŸ¥ï¼Œå¹³å‡è€—æ—¶ 15.2ç§’
```

## ðŸ”§ æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Amazon Q CLIä¸å¯ç”¨
```bash
âŒ æ‰¾ä¸åˆ°Amazon Q CLIå·¥å…·: qï¼Œè¯·æ£€æŸ¥å®‰è£…å’Œé…ç½®
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥CLIæ˜¯å¦æ­£ç¡®å®‰è£…: `which q`
- éªŒè¯PATHçŽ¯å¢ƒå˜é‡
- é‡æ–°å®‰è£…Amazon Q CLI

#### 2. è®¤è¯å¤±è´¥
```bash
âŒ AIåŠ©æ‰‹è°ƒç”¨å¤±è´¥: Authentication failed
```

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥AWSå‡­è¯é…ç½®: `aws configure list`
- éªŒè¯IAMæƒé™
- è¿è¡Œè®¤è¯æ£€æŸ¥: `q doctor`

#### 3. å“åº”è¶…æ—¶
```bash
â° AIåŠ©æ‰‹å“åº”è¶…æ—¶ï¼Œä»£ç å˜æ›´å¯èƒ½è¿‡äºŽå¤æ‚
```

**è§£å†³æ–¹æ¡ˆ**:
- å‡å°‘å•æ¬¡å®¡æŸ¥çš„æ–‡ä»¶æ•°é‡
- æ£€æŸ¥ç½‘ç»œè¿žæŽ¥
- å¢žåŠ è¶…æ—¶æ—¶é—´é…ç½®

#### 4. å¤‡ç”¨æœºåˆ¶è§¦å‘
```bash
ðŸ”„ å›žé€€åˆ°å¤‡ç”¨AIå®¢æˆ·ç«¯...
```

**è¯´æ˜Ž**: è¿™æ˜¯æ­£å¸¸çš„å®¹é”™æœºåˆ¶ï¼Œå½“Amazon Qä¸å¯ç”¨æ—¶ä¼šè‡ªåŠ¨ä½¿ç”¨å…¶ä»–AIæä¾›å•†ã€‚

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š

```bash
# åœ¨.envä¸­æ·»åŠ 
LOG_LEVEL=DEBUG

# æˆ–è€…ç›´æŽ¥è¿è¡Œ
DEBUG=true python3 app.py
```

## ðŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜æœºåˆ¶
- æ–‡ä»¶å†…å®¹ç¼“å­˜ï¼Œå‡å°‘é‡å¤APIè°ƒç”¨
- æ™ºèƒ½ç¼“å­˜æ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼

### 2. æ‰¹é‡å¤„ç†
- å¤šæ–‡ä»¶å˜æ›´æ‰¹é‡åˆ†æž
- è¡Œå†…è¯„è®ºæ‰¹é‡ç”Ÿæˆ

### 3. å¼‚æ­¥æ‰§è¡Œ
- å³æ—¶åé¦ˆï¼ŒåŽå°å¼‚æ­¥å¤„ç†
- é¿å…Webhookè¶…æ—¶

## ðŸ”’ å®‰å…¨è€ƒè™‘

### 1. å‡­è¯ç®¡ç†
- ä½¿ç”¨çŽ¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- å®šæœŸè½®æ¢APIå¯†é’¥
- é¿å…åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å‡­è¯

### 2. ç½‘ç»œå®‰å…¨
- ä½¿ç”¨HTTPSä¼ è¾“
- éªŒè¯Webhookç­¾å
- é™åˆ¶è®¿é—®IPèŒƒå›´

### 3. æ•°æ®éšç§
- ä»£ç å†…å®¹ä»…ç”¨äºŽå®¡æŸ¥ç›®çš„
- ä¸å­˜å‚¨æ•æ„Ÿä»£ç ä¿¡æ¯
- éµå¾ªæ•°æ®ä¿æŠ¤æ³•è§„

## ðŸ“ˆ ç›‘æŽ§å’Œç»´æŠ¤

### 1. æ—¥å¿—ç›‘æŽ§
```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
tail -f ai_code_review.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep "ERROR" ai_code_review.log
```

### 2. æ€§èƒ½ç›‘æŽ§
- å®¡æŸ¥å“åº”æ—¶é—´
- APIè°ƒç”¨é¢‘çŽ‡
- é”™è¯¯çŽ‡ç»Ÿè®¡

### 3. å®šæœŸç»´æŠ¤
- æ›´æ–°Amazon Q CLIç‰ˆæœ¬
- æ¸…ç†æ—¥å¿—æ–‡ä»¶
- æ£€æŸ¥é…ç½®æœ‰æ•ˆæ€§

## ðŸ¤ æœ€ä½³å®žè·µ

### 1. ä»£ç å®¡æŸ¥
- ä¸“æ³¨äºŽå®‰å…¨æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§
- æä¾›å»ºè®¾æ€§çš„æ”¹è¿›å»ºè®®
- ä¿æŒå®¡æŸ¥æ ‡å‡†çš„ä¸€è‡´æ€§

### 2. å›¢é˜Ÿåä½œ
- åŸ¹è®­å›¢é˜Ÿæˆå‘˜ä½¿ç”¨è§¦å‘å…³é”®è¯
- å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹è§„èŒƒ
- å®šæœŸæ”¶é›†åé¦ˆå’Œæ”¹è¿›

### 3. æŒç»­æ”¹è¿›
- ç›‘æŽ§å®¡æŸ¥è´¨é‡å’Œæ•ˆæžœ
- æ ¹æ®åé¦ˆè°ƒæ•´æç¤ºè¯
- ä¼˜åŒ–å®¡æŸ¥è§„åˆ™å’Œé…ç½®

---

## ðŸ“ž æŠ€æœ¯æ”¯æŒ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæŽ’é™¤éƒ¨åˆ†
2. è¿è¡Œå®Œæ•´æµ‹è¯•: `python3 test_amazonq_cli.py`
3. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶èŽ·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. æäº¤Issueåˆ°é¡¹ç›®ä»“åº“

**ç‰ˆæœ¬**: v2.0  
**æ›´æ–°æ—¶é—´**: 2025-01-03  
**ç»´æŠ¤è€…**: AIä»£ç å®¡æŸ¥å›¢é˜Ÿ
